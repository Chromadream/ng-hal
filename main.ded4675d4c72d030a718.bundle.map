{"version":3,"sources":["webpack:///main.ded4675d4c72d030a718.bundle.js","webpack:///./demo/app/app.component.html","webpack:///./demo/app/app.component.ts","webpack:///./demo/app/app.module.ts","webpack:///./demo/app/index.ts","webpack:///./demo/main.browser.ts","webpack:///./demo/platform/environment.ts","webpack:///./lib/conversion-strategy-json.ts","webpack:///./lib/conversion-strategy.ts","webpack:///./lib/hal-document.ts","webpack:///./lib/index.ts","webpack:///./lib/navigator.ts","webpack:///./~/halfred/halfred.js","webpack:///./~/halfred/lib/immutable_stack.js","webpack:///./~/halfred/lib/parser.js","webpack:///./~/halfred/lib/resource.js"],"names":["webpackJsonp","555","module","exports","551","__webpack_require__","core_1","dist_1","AppComponent","navigator","this","model","verb","url","activeTab","links","prototype","ngOnInit","console","log","onFormSubmit","_this","get","subscribe","doc","resource","response","request","allLinks","key","linkArray","_i","links_1","length","link","push","rel","onSwitchTab","name","onNavigate","href","__decorate","Component","selector","template","__metadata","_a","Navigator","Object","552","platform_browser_1","http_1","forms_1","app_component_1","ConversionStrategy","APP_PROVIDERS","Provider","useFactory","ConversionStrategyJson","AppModule","NgModule","declarations","bootstrap","imports","BrowserModule","HttpModule","FormsModule","providers","553","__export","m","p","hasOwnProperty","0","main","initialHmrState","platform_browser_dynamic_1","platformBrowserDynamic","bootstrapModule","app_1","then","environment_1","decorateComponentRef","catch","err","error","document","addEventListener","554","PROVIDERS","_decorateComponentRef","value","disableDebugTools","enableProdMode","slice","ENV_PROVIDERS","596","halfred_1","accepts","mediaType","convert","data","json","parse","Injectable","402","403","HalDocument","_request","_response","_resource","defineProperty","enumerable","configurable","404","enableValidation","disableValidation","conversion_strategy_1","conversion_strategy_json_1","hal_document_1","navigator_1","597","http","conversionStrategy","options","map","res","doConvert","post","body","put","delete","patch","head","navigate","headers","Http","440","Parser","Resource","validationFlag","unparsed","flag","758","ImmutableStack","arguments","_array","array","isEmpty","element","pop","peek","Error","759","_parse","validation","path","allLinkArrays","parseLinks","_links","curies","parseCuries","allEmbeddedArrays","parseEmbeddedResourcess","_embedded","copyNonHalProperties","_original","parseHalProperty","parseLink","self","reportValidationIssue","linkArrays","original","parentValidation","embedded","identity","keys","forEach","embeddedElement","childValidation","embeddedResource","property","processingFunction","copy","arrayfy","object","fn","isArray","linkKey","isObject","shallowCopy","linkSpec","required","defaultValue","deprecation","pathToString","templated","indexOf","o","toString","call","message","source","s","i","substring","Stack","type","profile","title","hreflang","441","validationIssues","_initCuries","_validation","propertyArray","elementOfPropertyArray","index","_curiesMap","_curies","curie","_preResolveCuries","_resolvedCuriesMap","_preResolveCurie","prefixAndReference","split","candidate","replace","hasCuries","curieArray","reverseResolveCurie","fullUrl","allEmbeddedResourceArrays","embeddedResourceArray","allEmbeddedResources","embeddedArray"],"mappings":"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","file":"main.ded4675d4c72d030a718.bundle.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 555:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"container p-t-3 p-b-3\\\">\\n\\n  <h1>HAL Navigator</h1>\\n\\n  <p class=\\\"lead\\\">Hyping thru media with the hypermedia abstraction language.</p>\\n\\n  <hr>\\n\\n  <main>\\n    <form (ngSubmit)=\\\"onFormSubmit()\\\">\\n      <div class=\\\"form-group row\\\">\\n        <label for=\\\"formVerb\\\" class=\\\"col-sm-2\\\">HTTP Verb:</label>\\n        <div class=\\\"col-sm-10\\\">\\n          <select class=\\\"form-control\\\" id=\\\"formVerb\\\"\\n                  name=\\\"verb\\\" [(ngModel)]=\\\"model.verb\\\">\\n            <option>GET</option>\\n            <option>POST</option>\\n            <option>PUT</option>\\n            <option>DELETE</option>\\n            <option>PATCH</option>\\n            <option>HEAD</option>\\n            <option>OPTIONS</option>\\n          </select>\\n        </div>\\n      </div>\\n      <div class=\\\"form-group row\\\">\\n        <label for=\\\"formUrlInput\\\" class=\\\"col-sm-2\\\">URL:</label>\\n        <div class=\\\"col-sm-10\\\">\\n          <input id=\\\"formUrlInput\\\" class=\\\"form-control\\\"\\n                 type=\\\"text\\\" name=\\\"url\\\" [(ngModel)]=\\\"model.url\\\"/>\\n        </div>\\n      </div>\\n      <div class=\\\"form-group row\\\">\\n        <div class=\\\"offset-sm-2 col-sm-10\\\">\\n          <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Navigate</button>\\n        </div>\\n      </div>\\n    </form>\\n  </main>\\n\\n  <nav>\\n    <ul class=\\\"nav nav-tabs m-b-1\\\">\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'hal'\\\"      (click)=\\\"onSwitchTab('hal')\\\">HAL Resource</a></li>\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'links'\\\"    (click)=\\\"onSwitchTab('links')\\\">Links</a></li>\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'embedded'\\\" (click)=\\\"onSwitchTab('embedded')\\\">Embedded</a></li>\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'http'\\\"     (click)=\\\"onSwitchTab('http')\\\">HTTP</a></li>\\n    </ul>\\n  </nav>\\n\\n  <aside *ngIf=\\\"activeTab == 'hal'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Original Resource</h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.original() | json }}</code></pre>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Resource <small><em>(normalized by halfred)</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource | json }}</code></pre>\\n      </div>\\n    </div>\\n  </aside>\\n\\n  <aside *ngIf=\\\"activeTab == 'links'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Links <small><em>resource.allLinks()</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.allLinks() | json }}</code></pre>\\n\\n        <h4>CURIEs <small><em>resource.curieArray()</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.curieArray() | json }}</code></pre>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Navigation</h4>\\n        <ul>\\n          <li *ngFor=\\\"let link of links\\\">\\n            <a href=\\\"{{link.link.href}}\\\" (click)=\\\"onNavigate(link.link)\\\">{{link.rel}} {{link.link.href}}</a>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </aside>\\n\\n  <aside *ngIf=\\\"activeTab == 'embedded'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-12\\\">\\n        <h4>All Embedded Resources <small><em>resource.allEmbeddedResources()</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.allEmbeddedResources() | json}}</code></pre>\\n      </div>\\n    </div>\\n  </aside>\\n\\n  <aside *ngIf=\\\"activeTab == 'http'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Request</h4>\\n        <pre><code class=\\\"small\\\">{{ request | json}}</code></pre>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Response</h4>\\n        <pre><code class=\\\"small\\\">{{ response | json }}</code></pre>\\n      </div>\\n    </div>\\n  </aside>\\n\\n\\n  <footer>\\n  </footer>\\n\\n</div>\\n\"\n\n/***/ },\n\n/***/ 551:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar core_1 = __webpack_require__(1);\n\tvar dist_1 = __webpack_require__(404);\n\t/** Demo application */\n\tvar AppComponent = (function () {\n\t    function AppComponent(navigator) {\n\t        this.navigator = navigator;\n\t        this.model = {\n\t            verb: 'GET',\n\t            url: 'hal/orders.json'\n\t        };\n\t        this.activeTab = 'hal';\n\t        this.links = [];\n\t    }\n\t    AppComponent.prototype.ngOnInit = function () {\n\t        console.log(\"AppComponent inited.\", this.navigator);\n\t        /*\n\t        this.navigator\n\t          .get('/hal/orders.json')\n\t          .mergeMap((hal: HalDocument) => { // XX .. follow\n\t            console.log(\"mergeMap\");\n\t            return this.navigator.get('/hal/orders_523.json')\n\t          })\n\t          .mergeMap((hal: HalDocument) => { // XX .. follow\n\t            console.log(\"mergeMap\");\n\t            return this.navigator.get('/hal/links_self.json')\n\t          })\n\t          .subscribe((hal: HalDocument) => { // XX .. follow\n\t            console.log(hal);\n\t            console.log(\"finished\");\n\t          })\n\t        */\n\t    };\n\t    AppComponent.prototype.onFormSubmit = function () {\n\t        var _this = this;\n\t        console.log(\"form model:\", this.model);\n\t        this.navigator\n\t            .get(this.model.url)\n\t            .subscribe(function (doc) {\n\t            _this.resource = doc.resource;\n\t            _this.response = doc.response;\n\t            _this.request = doc.request;\n\t            _this.links = [];\n\t            var allLinks = _this.resource.allLinks();\n\t            for (var key in allLinks) {\n\t                var links = _this.resource.linkArray(key);\n\t                for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n\t                    var link = links_1[_i];\n\t                    _this.links.push({ rel: key, link: link });\n\t                }\n\t            }\n\t        });\n\t    };\n\t    AppComponent.prototype.onSwitchTab = function (name) {\n\t        this.activeTab = name;\n\t        return false;\n\t    };\n\t    AppComponent.prototype.onNavigate = function (link) {\n\t        this.model['url'] = link.href;\n\t        return false;\n\t    };\n\t    AppComponent = __decorate([\n\t        core_1.Component({\n\t            selector: 'app',\n\t            template: __webpack_require__(555)\n\t        }), \n\t        __metadata('design:paramtypes', [(typeof (_a = typeof dist_1.Navigator !== 'undefined' && dist_1.Navigator) === 'function' && _a) || Object])\n\t    ], AppComponent);\n\t    return AppComponent;\n\t    var _a;\n\t}());\n\texports.AppComponent = AppComponent;\n\n\n/***/ },\n\n/***/ 552:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar core_1 = __webpack_require__(1);\n\tvar platform_browser_1 = __webpack_require__(79);\n\tvar http_1 = __webpack_require__(238);\n\tvar forms_1 = __webpack_require__(355);\n\tvar app_component_1 = __webpack_require__(551);\n\tvar dist_1 = __webpack_require__(404);\n\tconsole.log(dist_1.ConversionStrategy);\n\tvar APP_PROVIDERS = [\n\t    new core_1.Provider(dist_1.ConversionStrategy, { useFactory: function () { return new dist_1.ConversionStrategyJson(); } }),\n\t    dist_1.Navigator\n\t];\n\tvar AppModule = (function () {\n\t    function AppModule() {\n\t    }\n\t    AppModule = __decorate([\n\t        core_1.NgModule({\n\t            declarations: [app_component_1.AppComponent],\n\t            bootstrap: [app_component_1.AppComponent],\n\t            imports: [\n\t                platform_browser_1.BrowserModule,\n\t                http_1.HttpModule,\n\t                forms_1.FormsModule\n\t            ],\n\t            providers: [APP_PROVIDERS]\n\t        }), \n\t        __metadata('design:paramtypes', [])\n\t    ], AppModule);\n\t    return AppModule;\n\t}());\n\texports.AppModule = AppModule;\n\n\n/***/ },\n\n/***/ 553:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tfunction __export(m) {\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t}\n\t__export(__webpack_require__(552));\n\n\n/***/ },\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar platform_browser_dynamic_1 = __webpack_require__(370);\n\tvar app_1 = __webpack_require__(553);\n\tvar environment_1 = __webpack_require__(554);\n\t/* Bootstrap our Angular app with a top level ngmodule `AppModule`. */\n\tfunction main(initialHmrState) {\n\t    return platform_browser_dynamic_1.platformBrowserDynamic()\n\t        .bootstrapModule(app_1.AppModule)\n\t        .then(environment_1.decorateComponentRef)\n\t        .catch(function (err) { return console.error(err); });\n\t}\n\texports.main = main;\n\t// bootstrap when document is ready\n\tdocument.addEventListener('DOMContentLoaded', function () { return main(); });\n\n\n/***/ },\n\n/***/ 554:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t// Angular 2\n\t// rc2 workaround\n\tvar platform_browser_1 = __webpack_require__(79);\n\tvar core_1 = __webpack_require__(1);\n\t// Environment Providers\n\tvar PROVIDERS = [];\n\t// Angular debug tools in the dev console\n\t// https://github.com/angular/angular/blob/86405345b781a9dc2438c0fbe3e9409245647019/TOOLS_JS.md\n\tvar _decorateComponentRef = function identity(value) { return value; };\n\tif (true) {\n\t    // Production\n\t    platform_browser_1.disableDebugTools();\n\t    core_1.enableProdMode();\n\t    PROVIDERS = PROVIDERS.slice();\n\t}\n\telse {\n\t    _decorateComponentRef = function (cmpRef) {\n\t        var _ng = window.ng;\n\t        platform_browser_1.enableDebugTools(cmpRef);\n\t        window.ng.probe = _ng.probe;\n\t        window.ng.coreTokens = _ng.coreTokens;\n\t        return cmpRef;\n\t    };\n\t    // Development\n\t    PROVIDERS = PROVIDERS.slice();\n\t}\n\texports.decorateComponentRef = _decorateComponentRef;\n\texports.ENV_PROVIDERS = PROVIDERS.slice();\n\n\n/***/ },\n\n/***/ 596:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar core_1 = __webpack_require__(1);\n\tvar halfred_1 = __webpack_require__(440);\n\t/** A converter for 'application/hal+json' */\n\tvar ConversionStrategyJson = (function () {\n\t    function ConversionStrategyJson() {\n\t    }\n\t    ConversionStrategyJson.prototype.accepts = function (mediaType) {\n\t        return mediaType === 'application/json' || mediaType === 'application/hal+json';\n\t    };\n\t    ConversionStrategyJson.prototype.convert = function (response) {\n\t        var data = response.json();\n\t        return halfred_1.parse(data);\n\t    };\n\t    ConversionStrategyJson = __decorate([\n\t        core_1.Injectable(), \n\t        __metadata('design:paramtypes', [])\n\t    ], ConversionStrategyJson);\n\t    return ConversionStrategyJson;\n\t}());\n\texports.ConversionStrategyJson = ConversionStrategyJson;\n\n\n/***/ },\n\n/***/ 402:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ConversionStrategy = (function () {\n\t    function ConversionStrategy() {\n\t    }\n\t    return ConversionStrategy;\n\t}());\n\texports.ConversionStrategy = ConversionStrategy;\n\n\n/***/ },\n\n/***/ 403:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar HalDocument = (function () {\n\t    function HalDocument(_request, _response, _resource) {\n\t        this._request = _request;\n\t        this._response = _response;\n\t        this._resource = _resource;\n\t    }\n\t    Object.defineProperty(HalDocument.prototype, \"request\", {\n\t        get: function () {\n\t            return this._request;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(HalDocument.prototype, \"response\", {\n\t        get: function () {\n\t            return this._response;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(HalDocument.prototype, \"resource\", {\n\t        get: function () {\n\t            return this._resource;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    return HalDocument;\n\t}());\n\texports.HalDocument = HalDocument;\n\n\n/***/ },\n\n/***/ 404:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar halfred_1 = __webpack_require__(440);\n\texports.parse = halfred_1.parse;\n\texports.enableValidation = halfred_1.enableValidation;\n\texports.disableValidation = halfred_1.disableValidation;\n\tvar conversion_strategy_1 = __webpack_require__(402);\n\texports.ConversionStrategy = conversion_strategy_1.ConversionStrategy;\n\tvar conversion_strategy_json_1 = __webpack_require__(596);\n\texports.ConversionStrategyJson = conversion_strategy_json_1.ConversionStrategyJson;\n\tvar hal_document_1 = __webpack_require__(403);\n\texports.HalDocument = hal_document_1.HalDocument;\n\tvar navigator_1 = __webpack_require__(597);\n\texports.Navigator = navigator_1.Navigator;\n\n\n/***/ },\n\n/***/ 597:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/// <reference path=\"../typings/halfred.d.ts\" />\n\tvar core_1 = __webpack_require__(1);\n\tvar http_1 = __webpack_require__(238);\n\t__webpack_require__(168);\n\tvar conversion_strategy_1 = __webpack_require__(402);\n\tvar hal_document_1 = __webpack_require__(403);\n\tvar Navigator = (function () {\n\t    function Navigator(http, conversionStrategy) {\n\t        this.http = http;\n\t        this.conversionStrategy = conversionStrategy;\n\t    }\n\t    Navigator.prototype.get = function (url, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .get(url, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.post = function (url, body, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .post(url, body, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.put = function (url, body, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .put(url, body, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.delete = function (url, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .delete(url, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.patch = function (url, body, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .patch(url, body, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.head = function (url, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .head(url, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.options = function (url, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .options(url, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.navigate = function (url, options) {\n\t        var _this = this;\n\t        return this.http\n\t            .request(url, options)\n\t            .map(function (res) { return _this.doConvert(res); });\n\t    };\n\t    Navigator.prototype.doConvert = function (response) {\n\t        var mediaType = response.headers.get('Content-Type');\n\t        if (this.conversionStrategy.accepts(mediaType)) {\n\t            var resource = this.conversionStrategy.convert(response);\n\t            return new hal_document_1.HalDocument(null, response, resource);\n\t        }\n\t        return null;\n\t    };\n\t    Navigator = __decorate([\n\t        core_1.Injectable(), \n\t        __metadata('design:paramtypes', [http_1.Http, conversion_strategy_1.ConversionStrategy])\n\t    ], Navigator);\n\t    return Navigator;\n\t}());\n\texports.Navigator = Navigator;\n\n\n/***/ },\n\n/***/ 440:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Parser = __webpack_require__(759)\n\t  , Resource = __webpack_require__(441)\n\t  , validationFlag = false;\n\t\n\tmodule.exports = {\n\t\n\t  parse: function(unparsed) {\n\t    return new Parser().parse(unparsed, validationFlag);\n\t  },\n\t\n\t  enableValidation: function(flag) {\n\t    validationFlag = (flag != null) ? flag : true;\n\t  },\n\t\n\t  disableValidation: function() {\n\t    validationFlag = false;\n\t  },\n\t\n\t  Resource: Resource\n\t\n\t};\n\n\n/***/ },\n\n/***/ 758:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/*\n\t * A very naive copy-on-write immutable stack. Since the size of the stack\n\t * is equal to the depth of the embedded resources for one HAL resource, the bad\n\t * performance for the copy-on-write approach is probably not a problem at all.\n\t * Might be replaced by a smarter solution later. Or not. Whatever.\n\t */\n\tfunction ImmutableStack() {\n\t  if (arguments.length >= 1) {\n\t    this._array = arguments[0];\n\t  } else {\n\t    this._array = [];\n\t  }\n\t}\n\t\n\tImmutableStack.prototype.array = function() {\n\t  return this._array;\n\t};\n\t\n\tImmutableStack.prototype.isEmpty = function(array) {\n\t  return this._array.length === 0;\n\t};\n\t\n\tImmutableStack.prototype.push = function(element) {\n\t  var array = this._array.slice(0);\n\t  array.push(element);\n\t  return new ImmutableStack(array);\n\t};\n\t\n\tImmutableStack.prototype.pop = function() {\n\t  var array = this._array.slice(0, this._array.length - 1);\n\t  return new ImmutableStack(array);\n\t};\n\t\n\tImmutableStack.prototype.peek = function() {\n\t  if (this.isEmpty()) {\n\t    throw new Error('can\\'t peek on empty stack');\n\t  }\n\t  return this._array[this._array.length - 1];\n\t};\n\t\n\tmodule.exports = ImmutableStack;\n\n\n/***/ },\n\n/***/ 759:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Resource = __webpack_require__(441)\n\t  , Stack = __webpack_require__(758);\n\t\n\tvar linkSpec = {\n\t  href: { required: true, defaultValue: null },\n\t  templated: { required: false, defaultValue: false },\n\t  type: { required: false, defaultValue: null },\n\t  deprecation: { required: false, defaultValue: null },\n\t  name: { required: false, defaultValue: null },\n\t  profile: { required: false, defaultValue: null },\n\t  title: { required: false, defaultValue: null },\n\t  hreflang: { required: false, defaultValue: null }\n\t};\n\t\n\tfunction Parser() {\n\t}\n\t\n\tParser.prototype.parse = function parse(unparsed, validationFlag) {\n\t  var validation = validationFlag ? [] : null;\n\t  return _parse(unparsed, validation, new Stack());\n\t};\n\t\n\tfunction _parse(unparsed, validation, path) {\n\t  if (unparsed == null) {\n\t    return unparsed;\n\t  }\n\t  var allLinkArrays = parseLinks(unparsed._links, validation,\n\t      path.push('_links'));\n\t  var curies = parseCuries(allLinkArrays);\n\t  var allEmbeddedArrays = parseEmbeddedResourcess(unparsed._embedded,\n\t      validation, path.push('_embedded'));\n\t  var resource = new Resource(allLinkArrays, curies, allEmbeddedArrays,\n\t      validation);\n\t  copyNonHalProperties(unparsed, resource);\n\t  resource._original = unparsed;\n\t  return resource;\n\t}\n\t\n\tfunction parseLinks(links, validation, path) {\n\t  links = parseHalProperty(links, parseLink, validation, path);\n\t  if (links == null || links.self == null) {\n\t    // No links at all? Then it implictly misses the self link which it SHOULD\n\t    // have according to spec\n\t    reportValidationIssue('Resource does not have a self link', validation,\n\t        path);\n\t  }\n\t  return links;\n\t}\n\t\n\tfunction parseCuries(linkArrays) {\n\t  if (linkArrays) {\n\t    return linkArrays.curies;\n\t  } else {\n\t    return [];\n\t  }\n\t}\n\t\n\tfunction parseEmbeddedResourcess(original, parentValidation, path) {\n\t  var embedded = parseHalProperty(original, identity, parentValidation, path);\n\t  if (embedded == null) {\n\t    return embedded;\n\t  }\n\t  Object.keys(embedded).forEach(function(key) {\n\t    embedded[key] = embedded[key].map(function(embeddedElement) {\n\t      var childValidation = parentValidation != null ? [] : null;\n\t      var embeddedResource = _parse(embeddedElement, childValidation,\n\t          path.push(key));\n\t      embeddedResource._original = embeddedElement;\n\t      return embeddedResource;\n\t    });\n\t  });\n\t  return embedded;\n\t}\n\t\n\t/*\n\t * Copy over non-hal properties (everything that is not _links or _embedded)\n\t * to the parsed resource.\n\t */\n\tfunction copyNonHalProperties(unparsed, resource) {\n\t  Object.keys(unparsed).forEach(function(key) {\n\t    if (key !== '_links' && key !== '_embedded') {\n\t      resource[key] = unparsed[key];\n\t    }\n\t  });\n\t}\n\t\n\t/*\n\t * Processes one of the two main hal properties, that is _links or _embedded.\n\t * Each sub-property is turned into a single element array if it isn't already\n\t * an array. processingFunction is applied to each array element.\n\t */\n\tfunction parseHalProperty(property, processingFunction, validation, path) {\n\t  if (property == null) {\n\t    return property;\n\t  }\n\t\n\t  // create a shallow copy of the _links/_embedded object\n\t  var copy = {};\n\t\n\t  // normalize each link/each embedded object and put it into our copy\n\t  Object.keys(property).forEach(function(key) {\n\t    copy[key] = arrayfy(key, property[key], processingFunction,\n\t        validation, path);\n\t  });\n\t  return copy;\n\t}\n\t\n\tfunction arrayfy(key, object, fn, validation, path) {\n\t  if (isArray(object)) {\n\t    return object.map(function(element) {\n\t      return fn(key, element, validation, path);\n\t    });\n\t  } else {\n\t    return [fn(key, object, validation, path)];\n\t  }\n\t}\n\t\n\t\n\tfunction parseLink(linkKey, link, validation, path) {\n\t  if (!isObject(link)) {\n\t    throw new Error('Link object is not an actual object: ' + link +\n\t      ' [' + typeof link + ']');\n\t  }\n\t\n\t  // create a shallow copy of the link object\n\t  var copy = shallowCopy(link);\n\t\n\t  // add missing properties mandated by spec and do generic validation\n\t  Object.keys(linkSpec).forEach(function(key) {\n\t    if (copy[key] == null) {\n\t      if (linkSpec[key].required) {\n\t        reportValidationIssue('Link misses required property ' + key + '.',\n\t            validation, path.push(linkKey));\n\t      }\n\t      if (linkSpec[key].defaultValue != null) {\n\t        copy[key] = linkSpec[key].defaultValue;\n\t      }\n\t    }\n\t  });\n\t\n\t  // check more inter-property relations mandated by spec\n\t  if (copy.deprecation) {\n\t    log('Warning: Link ' + pathToString(path.push(linkKey)) +\n\t        ' is deprecated, see ' + copy.deprecation);\n\t  }\n\t  if (copy.templated !== true && copy.templated !== false) {\n\t    copy.templated = false;\n\t  }\n\t\n\t  if (!validation) {\n\t    return copy;\n\t  }\n\t  if (copy.href && copy.href.indexOf('{') >= 0 && !copy.templated) {\n\t    reportValidationIssue('Link seems to be an URI template ' +\n\t        'but its \"templated\" property is not set to true.', validation,\n\t        path.push(linkKey));\n\t  }\n\t  return copy;\n\t}\n\t\n\tfunction isArray(o) {\n\t  return Object.prototype.toString.call(o) === '[object Array]';\n\t}\n\t\n\tfunction isObject(o) {\n\t  return typeof o === 'object';\n\t}\n\t\n\tfunction identity(key, object) {\n\t  return object;\n\t}\n\t\n\tfunction reportValidationIssue(message, validation, path) {\n\t  if (validation) {\n\t    validation.push({\n\t      path: pathToString(path),\n\t      message: message\n\t    });\n\t  }\n\t}\n\t\n\t// TODO fix this ad hoc mess - does ie support console.log as of ie9?\n\tfunction log(message) {\n\t  if (typeof console !== 'undefined' && typeof console.log === 'function') {\n\t    console.log(message);\n\t  }\n\t}\n\t\n\tfunction shallowCopy(source) {\n\t  var copy = {};\n\t  Object.keys(source).forEach(function(key) {\n\t    copy[key] = source[key];\n\t  });\n\t  return copy;\n\t}\n\t\n\tfunction pathToString(path) {\n\t  var s = '$.';\n\t  for (var i = 0; i < path.array().length; i++) {\n\t    s += path.array()[i] + '.';\n\t  }\n\t  s = s.substring(0, s.length - 1);\n\t  return s;\n\t}\n\t\n\tmodule.exports = Parser;\n\n\n/***/ },\n\n/***/ 441:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction Resource(links, curies, embedded, validationIssues) {\n\t  var self = this;\n\t  this._links = links || {};\n\t  this._initCuries(curies);\n\t  this._embedded = embedded || {};\n\t  this._validation = validationIssues || [];\n\t}\n\t\n\tResource.prototype._initCuries = function(curies) {\n\t  this._curiesMap = {};\n\t  if (!curies) {\n\t    this._curies = [];\n\t  } else {\n\t    this._curies = curies;\n\t    for (var i = 0; i < this._curies.length; i++) {\n\t      var curie = this._curies[i];\n\t      this._curiesMap[curie.name] = curie;\n\t    }\n\t  }\n\t  this._preResolveCuries();\n\t};\n\t\n\tResource.prototype._preResolveCuries = function() {\n\t  this._resolvedCuriesMap = {};\n\t  for (var i = 0; i < this._curies.length; i++) {\n\t    var curie = this._curies[i];\n\t    if (!curie.name) {\n\t      continue;\n\t    }\n\t    for (var rel in this._links) {\n\t      if (rel !== 'curies') {\n\t        this._preResolveCurie(curie, rel);\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\tResource.prototype._preResolveCurie = function(curie, rel) {\n\t  var link = this._links[rel];\n\t  var prefixAndReference = rel.split(/:(.+)/);\n\t  var candidate = prefixAndReference[0];\n\t  if (curie.name === candidate) {\n\t    if (curie.templated && prefixAndReference.length >= 1) {\n\t      // TODO resolving templated CURIES should use a small uri template\n\t      // lib, not coded here ad hoc\n\t      var href = curie.href.replace(/(.*){(.*)}(.*)/, '$1' +\n\t          prefixAndReference[1] + '$3');\n\t      this._resolvedCuriesMap[href] = rel;\n\t    } else {\n\t      this._resolvedCuriesMap[curie.href] = rel;\n\t    }\n\t  }\n\t};\n\t\n\tResource.prototype.allLinkArrays = function() {\n\t  return this._links;\n\t};\n\t\n\tResource.prototype.linkArray = function(key) {\n\t  return propertyArray(this._links, key);\n\t};\n\t\n\tResource.prototype.link = function(key, index) {\n\t  return elementOfPropertyArray(this._links, key, index);\n\t};\n\t\n\tResource.prototype.hasCuries = function(key) {\n\t  return this._curies.length > 0;\n\t};\n\t\n\tResource.prototype.curieArray = function(key) {\n\t  return this._curies;\n\t};\n\t\n\tResource.prototype.curie = function(name) {\n\t  return this._curiesMap[name];\n\t};\n\t\n\tResource.prototype.reverseResolveCurie = function(fullUrl) {\n\t  return this._resolvedCuriesMap[fullUrl];\n\t};\n\t\n\tResource.prototype.allEmbeddedResourceArrays = function () {\n\t  return this._embedded;\n\t};\n\t\n\tResource.prototype.embeddedResourceArray = function(key) {\n\t  return propertyArray(this._embedded, key);\n\t};\n\t\n\tResource.prototype.embeddedResource = function(key, index) {\n\t  return elementOfPropertyArray(this._embedded, key, index);\n\t};\n\t\n\tResource.prototype.original = function() {\n\t  return this._original;\n\t};\n\t\n\tfunction propertyArray(object, key) {\n\t  return object != null ? object[key] : null;\n\t}\n\t\n\tfunction elementOfPropertyArray(object, key, index) {\n\t  index = index || 0;\n\t  var array = propertyArray(object, key);\n\t  if (array != null && array.length >= 1) {\n\t    return array[index];\n\t  }\n\t  return null;\n\t}\n\t\n\tResource.prototype.validationIssues = function() {\n\t  return this._validation;\n\t};\n\t\n\t// alias definitions\n\tResource.prototype.allLinks = Resource.prototype.allLinkArrays;\n\tResource.prototype.allEmbeddedArrays =\n\t    Resource.prototype.allEmbeddedResources =\n\t    Resource.prototype.allEmbeddedResourceArrays;\n\tResource.prototype.embeddedArray = Resource.prototype.embeddedResourceArray;\n\tResource.prototype.embedded = Resource.prototype.embeddedResource;\n\tResource.prototype.validation = Resource.prototype.validationIssues;\n\t\n\tmodule.exports = Resource;\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** main.ded4675d4c72d030a718.bundle.js\n **/","module.exports = \"<div class=\\\"container p-t-3 p-b-3\\\">\\n\\n  <h1>HAL Navigator</h1>\\n\\n  <p class=\\\"lead\\\">Hyping thru media with the hypermedia abstraction language.</p>\\n\\n  <hr>\\n\\n  <main>\\n    <form (ngSubmit)=\\\"onFormSubmit()\\\">\\n      <div class=\\\"form-group row\\\">\\n        <label for=\\\"formVerb\\\" class=\\\"col-sm-2\\\">HTTP Verb:</label>\\n        <div class=\\\"col-sm-10\\\">\\n          <select class=\\\"form-control\\\" id=\\\"formVerb\\\"\\n                  name=\\\"verb\\\" [(ngModel)]=\\\"model.verb\\\">\\n            <option>GET</option>\\n            <option>POST</option>\\n            <option>PUT</option>\\n            <option>DELETE</option>\\n            <option>PATCH</option>\\n            <option>HEAD</option>\\n            <option>OPTIONS</option>\\n          </select>\\n        </div>\\n      </div>\\n      <div class=\\\"form-group row\\\">\\n        <label for=\\\"formUrlInput\\\" class=\\\"col-sm-2\\\">URL:</label>\\n        <div class=\\\"col-sm-10\\\">\\n          <input id=\\\"formUrlInput\\\" class=\\\"form-control\\\"\\n                 type=\\\"text\\\" name=\\\"url\\\" [(ngModel)]=\\\"model.url\\\"/>\\n        </div>\\n      </div>\\n      <div class=\\\"form-group row\\\">\\n        <div class=\\\"offset-sm-2 col-sm-10\\\">\\n          <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Navigate</button>\\n        </div>\\n      </div>\\n    </form>\\n  </main>\\n\\n  <nav>\\n    <ul class=\\\"nav nav-tabs m-b-1\\\">\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'hal'\\\"      (click)=\\\"onSwitchTab('hal')\\\">HAL Resource</a></li>\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'links'\\\"    (click)=\\\"onSwitchTab('links')\\\">Links</a></li>\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'embedded'\\\" (click)=\\\"onSwitchTab('embedded')\\\">Embedded</a></li>\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\" [class.active]=\\\"activeTab == 'http'\\\"     (click)=\\\"onSwitchTab('http')\\\">HTTP</a></li>\\n    </ul>\\n  </nav>\\n\\n  <aside *ngIf=\\\"activeTab == 'hal'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Original Resource</h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.original() | json }}</code></pre>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Resource <small><em>(normalized by halfred)</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource | json }}</code></pre>\\n      </div>\\n    </div>\\n  </aside>\\n\\n  <aside *ngIf=\\\"activeTab == 'links'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Links <small><em>resource.allLinks()</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.allLinks() | json }}</code></pre>\\n\\n        <h4>CURIEs <small><em>resource.curieArray()</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.curieArray() | json }}</code></pre>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Navigation</h4>\\n        <ul>\\n          <li *ngFor=\\\"let link of links\\\">\\n            <a href=\\\"{{link.link.href}}\\\" (click)=\\\"onNavigate(link.link)\\\">{{link.rel}} {{link.link.href}}</a>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </aside>\\n\\n  <aside *ngIf=\\\"activeTab == 'embedded'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-12\\\">\\n        <h4>All Embedded Resources <small><em>resource.allEmbeddedResources()</em></small></h4>\\n        <pre><code class=\\\"small\\\">{{ resource?.allEmbeddedResources() | json}}</code></pre>\\n      </div>\\n    </div>\\n  </aside>\\n\\n  <aside *ngIf=\\\"activeTab == 'http'\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Request</h4>\\n        <pre><code class=\\\"small\\\">{{ request | json}}</code></pre>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <h4>Response</h4>\\n        <pre><code class=\\\"small\\\">{{ response | json }}</code></pre>\\n      </div>\\n    </div>\\n  </aside>\\n\\n\\n  <footer>\\n  </footer>\\n\\n</div>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./demo/app/app.component.html\n ** module id = 555\n ** module chunks = 2\n **/","import { Component, ViewEncapsulation } from '@angular/core';\nimport { Request, Response } from '@angular/http';\n\nimport { Navigator, HalDocument, ConversionStrategy, Resource, Link } from '../../dist';\n\n/** Demo application */\n@Component({\n  selector: 'app',\n  template: require('./app.component.html') \n})\nexport class AppComponent {\n\n  model: any = {\n    verb: 'GET',\n    url: 'hal/orders.json'\n  };\n  activeTab: string = 'hal';\n\n  resource: Resource;\n  response: Response;\n  request: Request;\n  links: {rel: string, link: Link}[] = [];\n\n  constructor(\n    private navigator: Navigator\n  ) {}\n\n  ngOnInit() {\n    console.log(\"AppComponent inited.\", this.navigator);\n\n    /*\n    this.navigator\n      .get('/hal/orders.json')\n      .mergeMap((hal: HalDocument) => { // XX .. follow\n        console.log(\"mergeMap\");\n        return this.navigator.get('/hal/orders_523.json')\n      })\n      .mergeMap((hal: HalDocument) => { // XX .. follow\n        console.log(\"mergeMap\");\n        return this.navigator.get('/hal/links_self.json')\n      })\n      .subscribe((hal: HalDocument) => { // XX .. follow\n        console.log(hal);\n        console.log(\"finished\");\n      })\n    */\n  }\n\n  onFormSubmit() {\n    console.log(\"form model:\", this.model);\n\n    this.navigator\n      .get(this.model.url)\n      .subscribe(\n        (doc: HalDocument) => {\n          this.resource = doc.resource;\n          this.response = doc.response;\n          this.request = doc.request;\n\n          this.links = [];\n          let allLinks = this.resource.allLinks();\n          for (let key in allLinks) {\n            let links = this.resource.linkArray(key);\n\n            for (let link of links) {\n              this.links.push({rel: key, link});\n            }\n          }\n        }\n      )\n  }\n\n  onSwitchTab(name: string) {\n    this.activeTab = name;\n\n    return false;\n  }\n\n  onNavigate(link: Link) {\n    this.model['url'] = link.href;\n\n    return false;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./demo/app/app.component.ts\n **/","import { NgModule, Provider } from '@angular/core';\nimport { BrowserModule  }     from '@angular/platform-browser';\nimport { HttpModule }         from '@angular/http';\nimport { FormsModule }        from '@angular/forms';\nimport { AppComponent }       from './app.component';\n\n\nimport { Navigator, ConversionStrategy, ConversionStrategyJson } from '../../dist';\nconsole.log(ConversionStrategy);\n\nconst APP_PROVIDERS: any[] = [\n  new Provider(ConversionStrategy, { useFactory: () => new ConversionStrategyJson() }),\n  Navigator\n];\n\n@NgModule({\n  declarations: [ AppComponent ],\n  bootstrap:    [ AppComponent ],\n  imports:      [\n    BrowserModule,\n    HttpModule,\n    FormsModule\n  ],\n  providers:    [ APP_PROVIDERS ]\n})\nexport class AppModule {}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./demo/app/app.module.ts\n **/","export * from './app.module';\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./demo/app/index.ts\n **/","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app';\nimport { decorateComponentRef } from './platform/environment';\n\n/* Bootstrap our Angular app with a top level ngmodule `AppModule`. */\nexport function main(initialHmrState?: any): Promise<any> {\n\n  return platformBrowserDynamic()\n    .bootstrapModule(AppModule)\n    .then(decorateComponentRef)\n    .catch(err => console.error(err));\n}\n\n// bootstrap when document is ready\ndocument.addEventListener('DOMContentLoaded', () => main());\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./demo/main.browser.ts\n **/","// Angular 2\n// rc2 workaround\nimport { enableDebugTools, disableDebugTools } from '@angular/platform-browser';\nimport { enableProdMode } from '@angular/core';\n\n// Environment Providers\nlet PROVIDERS: any[] = [\n  // common env directives\n];\n\n// Angular debug tools in the dev console\n// https://github.com/angular/angular/blob/86405345b781a9dc2438c0fbe3e9409245647019/TOOLS_JS.md\nlet _decorateComponentRef = function identity(value: any) { return value; };\n\nif ('production' === ENV) {\n  // Production\n  disableDebugTools();\n  enableProdMode();\n\n  PROVIDERS = [\n    ...PROVIDERS,\n    // custom providers in production\n  ];\n\n} else {\n\n  _decorateComponentRef = (cmpRef) => {\n    let _ng = (<any>window).ng;\n    enableDebugTools(cmpRef);\n    (<any>window).ng.probe = _ng.probe;\n    (<any>window).ng.coreTokens = _ng.coreTokens;\n    return cmpRef;\n  };\n\n  // Development\n  PROVIDERS = [\n    ...PROVIDERS,\n    // custom providers in development\n  ];\n\n}\n\nexport const decorateComponentRef = _decorateComponentRef;\n\nexport const ENV_PROVIDERS = [\n  ...PROVIDERS\n];\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/angular2-template-loader!./demo/platform/environment.ts\n **/","import { Injectable }   from '@angular/core';\nimport { Response }     from '@angular/http';\n\nimport { parse, Resource } from 'halfred';\n\nimport { ConversionStrategy } from './conversion-strategy';\nimport { HalDocument }        from './hal-document';\n\n\n/** A converter for 'application/hal+json' */\n@Injectable()\nexport class ConversionStrategyJson implements ConversionStrategy {\n\n  constructor() {}\n\n  accepts(mediaType: string): boolean {\n    return mediaType === 'application/json' || mediaType === 'application/hal+json';\n  }\n\n  convert(response: Response): Resource {\n    let data = response.json();\n\n    return parse(data);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/conversion-strategy-json.ts\n **/","import { Injectable }   from '@angular/core';\nimport { Response }     from '@angular/http';\n\nimport { Resource }     from 'halfred';\n\nimport { HalDocument }  from './hal-document';\n\n\nexport abstract class ConversionStrategy {\n\n  abstract accepts(mediaType: string): boolean;\n\n  abstract convert(response: Response): Resource;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/conversion-strategy.ts\n **/","/// <reference path=\"../typings/halfred.d.ts\" />\nimport { Request, Response } from '@angular/http';\nimport { Resource } from 'halfred';\n\nexport class HalDocument {\n\n  constructor(\n    private _request: Request,\n    private _response: Response,\n    private _resource: Resource\n  ) {}\n\n  public get request(): Request {\n    return this._request;\n  }\n\n  public get response(): Response {\n    return this._response;\n  }\n\n  public get resource(): Resource {\n    return this._resource;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/hal-document.ts\n **/","/// <reference path=\"../typings/halfred.d.ts\" />\nimport halfred = require('halfred');\nexport {\n  parse,\n  enableValidation,\n  disableValidation,\n  Resource,\n  ResourceCollection,\n  LinkCollection,\n  Link\n} from 'halfred';\n\nexport { ConversionStrategy } from './conversion-strategy';\nexport { ConversionStrategyJson } from './conversion-strategy-json';\nexport { HalDocument } from './hal-document';\nexport { Navigator } from './navigator';\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/index.ts\n **/","/// <reference path=\"../typings/halfred.d.ts\" />\nimport { Injectable } from '@angular/core';\nimport { Http, Request, RequestOptionsArgs, Response } from '@angular/http';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\n\nimport { parse, Resource } from 'halfred';\n\nimport { ConversionStrategy }   from './conversion-strategy';\nimport { HalDocument }          from './hal-document';\n\n\n@Injectable()\nexport class Navigator {\n\n  constructor(\n    private http: Http,\n    private conversionStrategy: ConversionStrategy\n  ) {}\n\n\n  public get(url: string, options?: RequestOptionsArgs): Observable<HalDocument> {\n\n    return this.http\n      .get(url, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  public post(url: string, body: any, options?: RequestOptionsArgs): Observable<HalDocument> {\n\n    return this.http\n      .post(url, body, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  public put(url: string, body: any, options?: RequestOptionsArgs): Observable<HalDocument> {\n\n    return this.http\n      .put(url, body, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  public delete(url: string, options?: RequestOptionsArgs): Observable<HalDocument>  {\n\n    return this.http\n      .delete(url, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  public patch(url: string, body: any, options?: RequestOptionsArgs): Observable<HalDocument> {\n\n    return this.http\n      .patch(url, body, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  public head(url: string, options?: RequestOptionsArgs): Observable<HalDocument> {\n\n    return this.http\n      .head(url, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  public options(url: string, options?: RequestOptionsArgs): Observable<HalDocument> {\n\n    return this.http\n      .options(url, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  public navigate(url: string | Request, options?: RequestOptionsArgs): Observable<HalDocument> {\n\n    return this.http\n      .request(url, options)\n      .map((res: Response) => this.doConvert(res));\n  }\n\n  private doConvert(response: Response): HalDocument {\n    let mediaType: string = response.headers.get('Content-Type');\n    if (this.conversionStrategy.accepts(mediaType)) {\n      let resource: Resource = this.conversionStrategy.convert(response);\n\n      return new HalDocument(null, response, resource);\n    }\n\n    return null;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/navigator.ts\n **/","var Parser = require('./lib/parser')\n  , Resource = require('./lib/resource')\n  , validationFlag = false;\n\nmodule.exports = {\n\n  parse: function(unparsed) {\n    return new Parser().parse(unparsed, validationFlag);\n  },\n\n  enableValidation: function(flag) {\n    validationFlag = (flag != null) ? flag : true;\n  },\n\n  disableValidation: function() {\n    validationFlag = false;\n  },\n\n  Resource: Resource\n\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/halfred/halfred.js\n ** module id = 440\n ** module chunks = 2\n **/","'use strict';\n\n/*\n * A very naive copy-on-write immutable stack. Since the size of the stack\n * is equal to the depth of the embedded resources for one HAL resource, the bad\n * performance for the copy-on-write approach is probably not a problem at all.\n * Might be replaced by a smarter solution later. Or not. Whatever.\n */\nfunction ImmutableStack() {\n  if (arguments.length >= 1) {\n    this._array = arguments[0];\n  } else {\n    this._array = [];\n  }\n}\n\nImmutableStack.prototype.array = function() {\n  return this._array;\n};\n\nImmutableStack.prototype.isEmpty = function(array) {\n  return this._array.length === 0;\n};\n\nImmutableStack.prototype.push = function(element) {\n  var array = this._array.slice(0);\n  array.push(element);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.pop = function() {\n  var array = this._array.slice(0, this._array.length - 1);\n  return new ImmutableStack(array);\n};\n\nImmutableStack.prototype.peek = function() {\n  if (this.isEmpty()) {\n    throw new Error('can\\'t peek on empty stack');\n  }\n  return this._array[this._array.length - 1];\n};\n\nmodule.exports = ImmutableStack;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/halfred/lib/immutable_stack.js\n ** module id = 758\n ** module chunks = 2\n **/","'use strict';\n\nvar Resource = require('./resource')\n  , Stack = require('./immutable_stack');\n\nvar linkSpec = {\n  href: { required: true, defaultValue: null },\n  templated: { required: false, defaultValue: false },\n  type: { required: false, defaultValue: null },\n  deprecation: { required: false, defaultValue: null },\n  name: { required: false, defaultValue: null },\n  profile: { required: false, defaultValue: null },\n  title: { required: false, defaultValue: null },\n  hreflang: { required: false, defaultValue: null }\n};\n\nfunction Parser() {\n}\n\nParser.prototype.parse = function parse(unparsed, validationFlag) {\n  var validation = validationFlag ? [] : null;\n  return _parse(unparsed, validation, new Stack());\n};\n\nfunction _parse(unparsed, validation, path) {\n  if (unparsed == null) {\n    return unparsed;\n  }\n  var allLinkArrays = parseLinks(unparsed._links, validation,\n      path.push('_links'));\n  var curies = parseCuries(allLinkArrays);\n  var allEmbeddedArrays = parseEmbeddedResourcess(unparsed._embedded,\n      validation, path.push('_embedded'));\n  var resource = new Resource(allLinkArrays, curies, allEmbeddedArrays,\n      validation);\n  copyNonHalProperties(unparsed, resource);\n  resource._original = unparsed;\n  return resource;\n}\n\nfunction parseLinks(links, validation, path) {\n  links = parseHalProperty(links, parseLink, validation, path);\n  if (links == null || links.self == null) {\n    // No links at all? Then it implictly misses the self link which it SHOULD\n    // have according to spec\n    reportValidationIssue('Resource does not have a self link', validation,\n        path);\n  }\n  return links;\n}\n\nfunction parseCuries(linkArrays) {\n  if (linkArrays) {\n    return linkArrays.curies;\n  } else {\n    return [];\n  }\n}\n\nfunction parseEmbeddedResourcess(original, parentValidation, path) {\n  var embedded = parseHalProperty(original, identity, parentValidation, path);\n  if (embedded == null) {\n    return embedded;\n  }\n  Object.keys(embedded).forEach(function(key) {\n    embedded[key] = embedded[key].map(function(embeddedElement) {\n      var childValidation = parentValidation != null ? [] : null;\n      var embeddedResource = _parse(embeddedElement, childValidation,\n          path.push(key));\n      embeddedResource._original = embeddedElement;\n      return embeddedResource;\n    });\n  });\n  return embedded;\n}\n\n/*\n * Copy over non-hal properties (everything that is not _links or _embedded)\n * to the parsed resource.\n */\nfunction copyNonHalProperties(unparsed, resource) {\n  Object.keys(unparsed).forEach(function(key) {\n    if (key !== '_links' && key !== '_embedded') {\n      resource[key] = unparsed[key];\n    }\n  });\n}\n\n/*\n * Processes one of the two main hal properties, that is _links or _embedded.\n * Each sub-property is turned into a single element array if it isn't already\n * an array. processingFunction is applied to each array element.\n */\nfunction parseHalProperty(property, processingFunction, validation, path) {\n  if (property == null) {\n    return property;\n  }\n\n  // create a shallow copy of the _links/_embedded object\n  var copy = {};\n\n  // normalize each link/each embedded object and put it into our copy\n  Object.keys(property).forEach(function(key) {\n    copy[key] = arrayfy(key, property[key], processingFunction,\n        validation, path);\n  });\n  return copy;\n}\n\nfunction arrayfy(key, object, fn, validation, path) {\n  if (isArray(object)) {\n    return object.map(function(element) {\n      return fn(key, element, validation, path);\n    });\n  } else {\n    return [fn(key, object, validation, path)];\n  }\n}\n\n\nfunction parseLink(linkKey, link, validation, path) {\n  if (!isObject(link)) {\n    throw new Error('Link object is not an actual object: ' + link +\n      ' [' + typeof link + ']');\n  }\n\n  // create a shallow copy of the link object\n  var copy = shallowCopy(link);\n\n  // add missing properties mandated by spec and do generic validation\n  Object.keys(linkSpec).forEach(function(key) {\n    if (copy[key] == null) {\n      if (linkSpec[key].required) {\n        reportValidationIssue('Link misses required property ' + key + '.',\n            validation, path.push(linkKey));\n      }\n      if (linkSpec[key].defaultValue != null) {\n        copy[key] = linkSpec[key].defaultValue;\n      }\n    }\n  });\n\n  // check more inter-property relations mandated by spec\n  if (copy.deprecation) {\n    log('Warning: Link ' + pathToString(path.push(linkKey)) +\n        ' is deprecated, see ' + copy.deprecation);\n  }\n  if (copy.templated !== true && copy.templated !== false) {\n    copy.templated = false;\n  }\n\n  if (!validation) {\n    return copy;\n  }\n  if (copy.href && copy.href.indexOf('{') >= 0 && !copy.templated) {\n    reportValidationIssue('Link seems to be an URI template ' +\n        'but its \"templated\" property is not set to true.', validation,\n        path.push(linkKey));\n  }\n  return copy;\n}\n\nfunction isArray(o) {\n  return Object.prototype.toString.call(o) === '[object Array]';\n}\n\nfunction isObject(o) {\n  return typeof o === 'object';\n}\n\nfunction identity(key, object) {\n  return object;\n}\n\nfunction reportValidationIssue(message, validation, path) {\n  if (validation) {\n    validation.push({\n      path: pathToString(path),\n      message: message\n    });\n  }\n}\n\n// TODO fix this ad hoc mess - does ie support console.log as of ie9?\nfunction log(message) {\n  if (typeof console !== 'undefined' && typeof console.log === 'function') {\n    console.log(message);\n  }\n}\n\nfunction shallowCopy(source) {\n  var copy = {};\n  Object.keys(source).forEach(function(key) {\n    copy[key] = source[key];\n  });\n  return copy;\n}\n\nfunction pathToString(path) {\n  var s = '$.';\n  for (var i = 0; i < path.array().length; i++) {\n    s += path.array()[i] + '.';\n  }\n  s = s.substring(0, s.length - 1);\n  return s;\n}\n\nmodule.exports = Parser;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/halfred/lib/parser.js\n ** module id = 759\n ** module chunks = 2\n **/","'use strict';\n\nfunction Resource(links, curies, embedded, validationIssues) {\n  var self = this;\n  this._links = links || {};\n  this._initCuries(curies);\n  this._embedded = embedded || {};\n  this._validation = validationIssues || [];\n}\n\nResource.prototype._initCuries = function(curies) {\n  this._curiesMap = {};\n  if (!curies) {\n    this._curies = [];\n  } else {\n    this._curies = curies;\n    for (var i = 0; i < this._curies.length; i++) {\n      var curie = this._curies[i];\n      this._curiesMap[curie.name] = curie;\n    }\n  }\n  this._preResolveCuries();\n};\n\nResource.prototype._preResolveCuries = function() {\n  this._resolvedCuriesMap = {};\n  for (var i = 0; i < this._curies.length; i++) {\n    var curie = this._curies[i];\n    if (!curie.name) {\n      continue;\n    }\n    for (var rel in this._links) {\n      if (rel !== 'curies') {\n        this._preResolveCurie(curie, rel);\n      }\n    }\n  }\n};\n\nResource.prototype._preResolveCurie = function(curie, rel) {\n  var link = this._links[rel];\n  var prefixAndReference = rel.split(/:(.+)/);\n  var candidate = prefixAndReference[0];\n  if (curie.name === candidate) {\n    if (curie.templated && prefixAndReference.length >= 1) {\n      // TODO resolving templated CURIES should use a small uri template\n      // lib, not coded here ad hoc\n      var href = curie.href.replace(/(.*){(.*)}(.*)/, '$1' +\n          prefixAndReference[1] + '$3');\n      this._resolvedCuriesMap[href] = rel;\n    } else {\n      this._resolvedCuriesMap[curie.href] = rel;\n    }\n  }\n};\n\nResource.prototype.allLinkArrays = function() {\n  return this._links;\n};\n\nResource.prototype.linkArray = function(key) {\n  return propertyArray(this._links, key);\n};\n\nResource.prototype.link = function(key, index) {\n  return elementOfPropertyArray(this._links, key, index);\n};\n\nResource.prototype.hasCuries = function(key) {\n  return this._curies.length > 0;\n};\n\nResource.prototype.curieArray = function(key) {\n  return this._curies;\n};\n\nResource.prototype.curie = function(name) {\n  return this._curiesMap[name];\n};\n\nResource.prototype.reverseResolveCurie = function(fullUrl) {\n  return this._resolvedCuriesMap[fullUrl];\n};\n\nResource.prototype.allEmbeddedResourceArrays = function () {\n  return this._embedded;\n};\n\nResource.prototype.embeddedResourceArray = function(key) {\n  return propertyArray(this._embedded, key);\n};\n\nResource.prototype.embeddedResource = function(key, index) {\n  return elementOfPropertyArray(this._embedded, key, index);\n};\n\nResource.prototype.original = function() {\n  return this._original;\n};\n\nfunction propertyArray(object, key) {\n  return object != null ? object[key] : null;\n}\n\nfunction elementOfPropertyArray(object, key, index) {\n  index = index || 0;\n  var array = propertyArray(object, key);\n  if (array != null && array.length >= 1) {\n    return array[index];\n  }\n  return null;\n}\n\nResource.prototype.validationIssues = function() {\n  return this._validation;\n};\n\n// alias definitions\nResource.prototype.allLinks = Resource.prototype.allLinkArrays;\nResource.prototype.allEmbeddedArrays =\n    Resource.prototype.allEmbeddedResources =\n    Resource.prototype.allEmbeddedResourceArrays;\nResource.prototype.embeddedArray = Resource.prototype.embeddedResourceArray;\nResource.prototype.embedded = Resource.prototype.embeddedResource;\nResource.prototype.validation = Resource.prototype.validationIssues;\n\nmodule.exports = Resource;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/halfred/lib/resource.js\n ** module id = 441\n ** module chunks = 2\n **/"],"sourceRoot":""}